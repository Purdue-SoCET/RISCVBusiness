CAPI=2:
name: socet:riscv:RISCVBusiness:0.1.1
description: RISC-V Core for AFTx series

filesets:
    components:
        files:
            - source_code/include/component_selection_defines.vh : {file_type: systemVerilogSource}

    rtl:
        depend:
            - "socet:bus-components:ahb_if"
            - "socet:bus-components:apb_if"
            - "socet:riscv:packages"
            - "socet:riscv:stage3"
            - "socet:riscv:priv"
            - "socet:riscv:caches"
            - "socet:riscv:riscv_standard"
            - "socet:riscv:riscv_include"
            - "socet:riscv:rv32a"
            - "socet:riscv:rv32c"
            - "socet:riscv:rv32m"
            - "socet:riscv:rv32b"
            - "socet:riscv:rv32zc"
        files:
            - source_code/branch_predictors/branch_predictor_wrapper.sv
            - source_code/branch_predictors/nottaken_predictor/nottaken_predictor.sv
            - source_code/bus_bridges/generic_nonpipeline.sv
            - source_code/sparce/sparce_disabled/sparce_disabled.sv
            - source_code/RV32E/rv32e_reg_file.sv
            - source_code/RV32E/rv32e_wrapper.sv
            - verification/uvm/multicore/params/addr_space.sv
        file_type: systemVerilogSource

    trackers:
        files:
            - source_code/trackers/branch_tracker.sv
            # - source_code/trackers/cpu_tracker.sv
        file_type: systemVerilogSource

    buses:
        files:
            - "!tool_verilator? (source_code/bus_bridges/ahb.sv)"
            - "!tool_verilator? (source_code/bus_bridges/apb.sv)"
        file_type: systemVerilogSource

    uvm_tb:
        files:
            - verification/uvm/multicore/data_agent/data_agent.svh
            - verification/uvm/multicore/data_agent/data_driver.svh
            - verification/uvm/multicore/data_agent/data_monitor.svh
            - verification/uvm/multicore/data_agent/data_sequencer.svh
            - verification/uvm/multicore/data_agent/data_transaction.svh
            - verification/uvm/multicore/env/env.svh
            - verification/uvm/multicore/env/scoreboard.svh
            - verification/uvm/multicore/instr_agent/instr_agent.svh
            - verification/uvm/multicore/instr_agent/instr_driver.svh
            - verification/uvm/multicore/instr_agent/instr_monitor.svh
            - verification/uvm/multicore/instr_agent/instr_sequencer.svh
            - verification/uvm/multicore/instr_agent/instr_transaction.svh
            - verification/uvm/multicore/interfaces/bus_if.vh
            - verification/uvm/multicore/interfaces/multicore_if.vh
            - verification/uvm/multicore/params/addr_space.sv
            - verification/uvm/multicore/params/dut_parameters.sv
            - verification/uvm/multicore/programmer/riscv_programmer.sv
            - verification/uvm/multicore/sequences/data_reset_seq.svh
            - verification/uvm/multicore/sequences/instr_reset_seq.svh
            - verification/uvm/multicore/tests/reset_test.svh
            - source_code/include/core_interrupt_if.vh
            - source_code/standard_core/multicore_wrapper.sv
            - verification/uvm/multicore/tb_tops/testbench_top.sv
        file_type: systemVerilogSource

    uvm_wrapper:
        files:
            - verification/uvm/multicore/interfaces/bus_if.vh
            - verification/uvm/multicore/interfaces/multicore_if.vh
            - source_code/standard_core/multicore_wrapper.sv
        file_type: systemVerilogSource

targets:
    default: &default
        filesets:
            - components
            - rtl
            - buses
        toplevel: RISCVBusiness

    sim:
        <<: *default
        description: Simulate w/TB
        default_tool: modelsim
        filesets_append:
            - trackers
            - uvm_tb
            - uvm_wrapper
        toplevel:
            - testbench_top
        tools:
            modelsim:
                vsim_options:
                    - -vopt
                    - -voptargs='+acc'
                    - -t ps